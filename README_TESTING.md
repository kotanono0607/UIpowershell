# 🧪 UIpowershell テストガイド

> **Phase 4完了版（v2.0.0-phase3）の動作確認ガイド**

---

## 🎯 このガイドについて

UIpowershellのPS1→HTML移行プロジェクト（Phase 1-4）が完了しました。
このガイドは、完成したシステムの動作確認を行うためのリソースをまとめています。

---

## 📂 テスト関連ドキュメント

### 🚀 クイックスタート（初めての方はこちら）

| ドキュメント | 所要時間 | 対象者 | 内容 |
|------------|---------|--------|------|
| **QUICK_TEST_CHECKLIST.md** | 5分 | 全員 | 最も重要な6つのテストを5分で完了 |
| **quick-start.ps1** | 2-3分 | 全員 | ワンクリックで起動（自動チェック付き） |

### 📚 詳細ドキュメント

| ドキュメント | 所要時間 | 対象者 | 内容 |
|------------|---------|--------|------|
| **TEST_INSTRUCTIONS.md** | 30分 | テスター | 包括的な動作確認手順（307行） |
| **ARCHITECTURE_OVERVIEW.md** | 15分 | 開発者 | システム全体のアーキテクチャ説明 |

### 🎓 プロジェクトドキュメント

| ドキュメント | 対象者 | 内容 |
|------------|--------|------|
| **MIGRATION_PROJECT_COMPLETE.md** | プロジェクト管理者 | Phase 1-4 全体サマリー |
| **adapter/PHASE3_COMPLETE.md** | バックエンド開発者 | API層（26エンドポイント） |
| **ui/PHASE4_COMPLETE.md** | フロントエンド開発者 | HTML/JS UI実装詳細 |

---

## ⚡ 最速でテストを開始する（3分）

### Step 1: クイックスタートスクリプトを実行（2分）

```powershell
# プロジェクトディレクトリで実行
.\quick-start.ps1
```

**このスクリプトが自動で行うこと**:
- ✅ 必須ファイル11個の存在チェック
- ✅ PowerShellバージョン確認（7.x推奨）
- ✅ Polarisモジュール確認（なければインストール）
- ✅ ポート8080の使用状況チェック
- ✅ APIサーバー起動
- ✅ ブラウザ自動起動（オプション）

---

### Step 2: クイックテストチェックリストを実行（5分）

**QUICK_TEST_CHECKLIST.md** を開いて、6つの必須テストを実施:

1. ✅ API接続テスト（30秒）
2. ✅ ノード追加テスト（1分）
3. ✅ ノード移動テスト（30秒）
4. ✅ 変数管理テスト（1分）
5. ✅ コード生成テスト（1分）
6. ✅ ノード削除テスト（1分）

---

## 📖 各テストレベルの詳細

### 🟢 Level 1: クイックテスト（5分）

**目的**: 基本機能が動作することを確認
**ドキュメント**: QUICK_TEST_CHECKLIST.md
**対象者**: すべてのユーザー

**テスト項目**:
- API接続
- ノード追加・移動・削除
- 変数管理
- コード生成

**成功基準**:
- すべてのボタンが反応する
- エラーメッセージが表示されない
- ノードがキャンバスに表示される
- PowerShellファイルが生成される

---

### 🟡 Level 2: 包括的テスト（30分）

**目的**: すべての機能を詳細に確認
**ドキュメント**: TEST_INSTRUCTIONS.md
**対象者**: テスター、品質保証担当者

**テスト項目**:
1. API接続テスト
2. ノード追加
3. ノードのドラッグ&ドロップ
4. 変数管理（CRUD操作）
5. フォルダ管理
6. コード生成
7. ノード削除（セット削除含む）
8. ネスト規制バリデーション
9. グループ分断検証
10. エラーハンドリング

**成功基準**:
- 全11項目のチェックリストが完了
- セット削除が正しく動作
- ネスト規制が違反時にアラート表示
- すべてのモーダルが正しく動作

---

### 🔴 Level 3: アーキテクチャ理解（15-30分）

**目的**: システム構造を理解し、カスタマイズに備える
**ドキュメント**: ARCHITECTURE_OVERVIEW.md
**対象者**: 開発者、システムアーキテクト

**学習項目**:
- システム全体構成図
- データフロー（ノード追加、コード生成、削除）
- Phase 2: v2 Functions（6ファイル、3,980行）
- Phase 3: Adapter Layer（3ファイル、1,730行）
- Phase 4: HTML/JS Frontend（2ファイル、1,350行）
- 26 REST APIエンドポイント
- パフォーマンス指標

---

## 🛠️ トラブルシューティング

### ❌ よくある問題と解決方法

| 問題 | 原因 | 解決方法 |
|------|------|---------|
| **Polarisが見つからない** | モジュール未インストール | `quick-start.ps1` が自動インストール |
| **ポート8080が使用中** | 既存サーバー起動中 | `quick-start.ps1` で別ポートを選択 |
| **ブラウザでアクセスできない** | ファイアウォール | ファイアウォール設定を確認 |
| **v2ファイルが読み込まれない** | 間違ったディレクトリ | プロジェクトルートで実行 |
| **APIエラーが発生** | サーバー起動失敗 | PowerShellコンソールでエラー確認 |

**詳細なトラブルシューティング**: TEST_INSTRUCTIONS.md を参照

---

## 📊 テスト完了基準

### ✅ 最小基準（本番利用可能）

- [x] quick-start.ps1 でサーバーが起動できる
- [x] ブラウザでindex-v2.htmlにアクセスできる
- [x] API接続テストが成功する
- [x] ノード追加・削除が動作する
- [x] コード生成が動作する

### ✅ 推奨基準（すべての機能確認）

- [x] QUICK_TEST_CHECKLIST.md の6項目すべて完了
- [x] TEST_INSTRUCTIONS.md の11項目すべて完了
- [x] セット削除（条件分岐3点、ループ2点）が動作
- [x] ネスト規制バリデーションが動作
- [x] 変数管理UIが完全に動作

---

## 🎯 次のステップ

### ✅ テストが成功した場合

1. **実際のワークフロー作成**
   - 複数ノードを配置
   - 条件分岐・ループを使用
   - PowerShellコードを生成・実行

2. **既存のWindows Formsアプリと比較**
   - 同じワークフローを両方で作成
   - 生成されたコードを比較
   - パフォーマンスを比較

3. **カスタマイズ・拡張**
   - ARCHITECTURE_OVERVIEW.md でシステム理解
   - 新しいノードタイプを追加
   - 新しいAPIエンドポイントを追加

---

### ❌ テストが失敗した場合

1. **エラー情報の収集**
   - PowerShellコンソールのエラーメッセージ
   - ブラウザコンソール（F12キー）のエラー
   - 環境情報（Windows, PowerShell, ブラウザのバージョン）

2. **トラブルシューティング実施**
   - TEST_INSTRUCTIONS.md のトラブルシューティングセクション
   - QUICK_TEST_CHECKLIST.md のトラブルシューティング表

3. **問題報告**
   - 収集したエラー情報
   - 実行したコマンド
   - 期待した動作と実際の動作

---

## 📞 サポート

### ドキュメント索引

| 知りたいこと | 参照ドキュメント |
|------------|---------------|
| とにかく早くテストしたい | **QUICK_TEST_CHECKLIST.md** |
| 起動方法がわからない | **quick-start.ps1 実行** |
| すべての機能をテストしたい | **TEST_INSTRUCTIONS.md** |
| システム構造を理解したい | **ARCHITECTURE_OVERVIEW.md** |
| プロジェクト全体を把握したい | **MIGRATION_PROJECT_COMPLETE.md** |
| API詳細を知りたい | **adapter/PHASE3_COMPLETE.md** |
| フロントエンド実装を知りたい | **ui/PHASE4_COMPLETE.md** |

---

## 📈 プロジェクト統計

### 開発規模

- **Phase 1**: UI保存（既存UIをバックアップ）
- **Phase 2**: v2 Functions（6ファイル、3,980行、UI非依存化）
- **Phase 3**: Adapter Layer（3ファイル、1,730行、REST API 26エンドポイント）
- **Phase 4**: HTML/JS Frontend（2ファイル、1,350行、React Flow統合）

**合計**: 11ファイル、7,060行のコード

### 再利用率

- **既存コード再利用**: 約70%（v2化により関数ロジックは保持）
- **新規コード**: 約30%（Adapter Layer + Frontend）
- **後方互換性**: 100%（Windows Formsアプリはそのまま動作）

### テストカバレッジ

- **API エンドポイント**: 26個（すべてテスト可能）
- **v2 Functions**: 主要関数すべて（17関数以上）
- **UI 操作**: すべての主要操作（追加、削除、移動、生成、変数管理）

---

## 🎉 完了メッセージ

すべてのテストが成功したら、以下が達成できたことになります：

✅ **Windows FormsアプリのUI部分を完全にHTML/JSに移行**
✅ **既存のPowerShell関数70%を再利用**
✅ **REST API経由でブラウザから操作可能**
✅ **React Flowによる現代的なビジュアルエディター**
✅ **セット削除、ネスト規制など複雑なロジックも移行成功**
✅ **100%後方互換性を維持（既存アプリも動作）**

**おめでとうございます！🎊**

---

**最終更新**: 2025-11-02
**対象バージョン**: v2.0.0-phase3（Phase 4完了版）
**プロジェクト期間**: Phase 1-4完了
**総開発時間**: 一連のセッションで完了
